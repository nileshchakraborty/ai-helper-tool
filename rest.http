### Mac Interview Copilot API Test Requests
### Use with VS Code REST Client extension or JetBrains HTTP Client

@baseUrl = http://localhost:3000
@token = {{$dotenv JWT_SECRET}}

### ===========================================
### Health Check
### ===========================================

### Health Check
GET {{baseUrl}}/health

### ===========================================
### Auth Endpoints
### ===========================================

### Sign Up
POST {{baseUrl}}/v1/auth/signup
Content-Type: application/json

{
  "email": "test@example.com",
  "password": "password123",
  "fullName": "Test User"
}

### Login
POST {{baseUrl}}/v1/auth/login
Content-Type: application/json

{
  "email": "test@example.com",
  "password": "password123"
}

### ===========================================
### Profile Endpoints (requires auth)
### ===========================================

### Get Profile
GET {{baseUrl}}/v1/profile
Authorization: Bearer {{token}}

### Update Preferences
PATCH {{baseUrl}}/v1/profile/preferences
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "saveSessionHistory": true,
  "dataRetentionDays": 30
}

### ===========================================
### Session Endpoints (requires auth)
### ===========================================

### Create New Session
POST {{baseUrl}}/v1/sessions
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "title": "Interview Practice",
  "type": "behavioral"
}

### Get Session History
GET {{baseUrl}}/v1/sessions
Authorization: Bearer {{token}}

### Get Session Messages
# @name getMessages
GET {{baseUrl}}/v1/sessions/SESSION_ID_HERE/messages
Authorization: Bearer {{token}}

### ===========================================
### AI Streaming Endpoints
### ===========================================

### Behavioral Answer (SSE Stream)
# Uses Ollama by default, add "provider": "openai" or "anthropic" if configured
POST {{baseUrl}}/v1/behavioral/answer
Content-Type: application/json
Accept: text/event-stream

{
  "question": "Tell me about a time you had to deal with a difficult coworker",
  "context": "Applying for Senior Software Engineer role at a tech company. I want to demonstrate conflict resolution and teamwork skills.",
  "provider": "ollama"
}

### Behavioral Answer with Session
POST {{baseUrl}}/v1/behavioral/answer
Authorization: Bearer {{token}}
Content-Type: application/json
Accept: text/event-stream

{
  "question": "Describe a challenging project you led",
  "context": "Looking for Project Manager position. Emphasize leadership and problem-solving.",
  "provider": "ollama",
  "sessionId": "SESSION_ID_HERE"
}

### Coding Assist (SSE Stream)
POST {{baseUrl}}/v1/coding/assist
Content-Type: application/json
Accept: text/event-stream

{
  "question": "How do I optimize this function for better time complexity?",
  "code": "function findDuplicates(arr) {\n  const duplicates = [];\n  for (let i = 0; i < arr.length; i++) {\n    for (let j = i + 1; j < arr.length; j++) {\n      if (arr[i] === arr[j] && !duplicates.includes(arr[i])) {\n        duplicates.push(arr[i]);\n      }\n    }\n  }\n  return duplicates;\n}",
  "provider": "ollama"
}

### Coding Assist with Python
POST {{baseUrl}}/v1/coding/assist
Content-Type: application/json
Accept: text/event-stream

{
  "question": "Explain how this sorting algorithm works and suggest improvements",
  "code": "def bubble_sort(arr):\n    n = len(arr)\n    for i in range(n):\n        for j in range(0, n-i-1):\n            if arr[j] > arr[j+1]:\n                arr[j], arr[j+1] = arr[j+1], arr[j]\n    return arr",
  "provider": "ollama"
}

### ===========================================
### MBA Consulting Case Interviews
### ===========================================

### Case Interview - Profitability
POST {{baseUrl}}/v1/case/analyze
Content-Type: application/json
Accept: text/event-stream

{
  "caseDescription": "Our client is a national coffee chain that has seen profits decline by 20% over the past two years. What could be causing this and how should they address it?",
  "context": "McKinsey first-round interview. Client has 500 stores, $2B revenue.",
  "provider": "ollama"
}

### Case Interview - Market Entry
POST {{baseUrl}}/v1/case/analyze
Content-Type: application/json
Accept: text/event-stream

{
  "caseDescription": "A European luxury automaker is considering entering the Indian market. Should they do it, and if so, how?",
  "context": "BCG final-round interview. Focus on market sizing and entry strategy.",
  "provider": "ollama"
}

### Case Interview - Market Sizing
POST {{baseUrl}}/v1/case/analyze
Content-Type: application/json
Accept: text/event-stream

{
  "caseDescription": "How many golf balls can fit in a school bus?",
  "context": "Estimation question. Walk through the calculation step by step.",
  "provider": "ollama"
}

### Case Interview - M&A
POST {{baseUrl}}/v1/case/analyze
Content-Type: application/json
Accept: text/event-stream

{
  "caseDescription": "A private equity firm is considering acquiring a mid-sized pharmaceutical company. What factors should they evaluate?",
  "context": "Bain case interview. Client is looking at a $500M acquisition.",
  "provider": "ollama"
}

### ===========================================
### Natural Coaching (Conversational Answers)
### ===========================================

### Natural Coaching - Behavioral Question
# Generates talking points that sound natural when spoken, not like reading
POST {{baseUrl}}/v1/coach/natural
Content-Type: application/json
Accept: text/event-stream

{
  "question": "Tell me about a time you had to deal with a difficult coworker",
  "context": "Senior Software Engineer interview at Google. Want to show conflict resolution and teamwork.",
  "provider": "ollama"
}

### Natural Coaching - Leadership Question
POST {{baseUrl}}/v1/coach/natural
Content-Type: application/json
Accept: text/event-stream

{
  "question": "What's your management style?",
  "context": "Engineering Manager position. 5 years of leadership experience.",
  "provider": "ollama"
}

### ===========================================
### Live Audio Assist (From Transcription)
### ===========================================

### Live Assist - Behavioral
# Use this when you transcribe what the interviewer said
POST {{baseUrl}}/v1/listen/assist
Content-Type: application/json
Accept: text/event-stream

{
  "transcription": "Can you walk me through a situation where you had to make a difficult decision with incomplete information?",
  "interviewType": "behavioral",
  "provider": "ollama"
}

### Live Assist - Technical
POST {{baseUrl}}/v1/listen/assist
Content-Type: application/json
Accept: text/event-stream

{
  "transcription": "How would you design a URL shortener like bit.ly?",
  "interviewType": "system design",
  "provider": "ollama"
}

### Live Assist - Case Interview
POST {{baseUrl}}/v1/listen/assist
Content-Type: application/json
Accept: text/event-stream

{
  "transcription": "Our client is a regional bank losing market share to fintech startups. What should they do?",
  "interviewType": "case",
  "provider": "ollama"
}

### ===========================================
### Quick Tests (No Auth Required)
### ===========================================

### Test Ollama Connection
GET http://localhost:11434/api/version

### List Ollama Models
GET http://localhost:11434/api/tags

### Test Behavioral with Ollama (minimal)
POST {{baseUrl}}/v1/behavioral/answer
Content-Type: application/json
Accept: text/event-stream

{
  "question": "What is your greatest strength?",
  "context": "Standard interview question",
  "provider": "ollama"
}
